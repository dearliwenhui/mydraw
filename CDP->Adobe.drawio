<mxfile host="app.diagrams.net" modified="2023-04-07T07:55:27.252Z" agent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/111.0.0.0 Safari/537.36" etag="HFTNJqhpKLYFNXPzFaCq" version="21.1.4" type="github">
  <diagram name="第 1 页" id="dYUoFG49znBWoF7892X2">
    <mxGraphModel dx="1440" dy="764" grid="0" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="x_W76neEEtvd7lcD01PX-147" value="分页条件loop" style="shape=umlFrame;whiteSpace=wrap;html=1;pointerEvents=0;fillColor=#fff2cc;strokeColor=default;swimlaneFillColor=none;gradientColor=none;" vertex="1" parent="1">
          <mxGeometry x="154" y="1314" width="1080" height="280" as="geometry" />
        </mxCell>
        <mxCell id="x_W76neEEtvd7lcD01PX-117" value="CDP JOB Server" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;dropTarget=0;collapsible=0;recursiveResize=0;outlineConnect=0;portConstraint=eastwest;newEdgeStyle={&quot;edgeStyle&quot;:&quot;elbowEdgeStyle&quot;,&quot;elbow&quot;:&quot;vertical&quot;,&quot;curved&quot;:0,&quot;rounded&quot;:0};" vertex="1" parent="1">
          <mxGeometry x="174" y="980" width="113" height="978" as="geometry" />
        </mxCell>
        <mxCell id="x_W76neEEtvd7lcD01PX-118" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;outlineConnect=0;targetShapes=umlLifeline;portConstraint=eastwest;newEdgeStyle={&quot;edgeStyle&quot;:&quot;elbowEdgeStyle&quot;,&quot;elbow&quot;:&quot;vertical&quot;,&quot;curved&quot;:0,&quot;rounded&quot;:0};" vertex="1" parent="x_W76neEEtvd7lcD01PX-117">
          <mxGeometry x="52" y="94" width="10" height="788" as="geometry" />
        </mxCell>
        <mxCell id="x_W76neEEtvd7lcD01PX-119" value="starrocks.CDP_MBHK_CALCULATION" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;dropTarget=0;collapsible=0;recursiveResize=0;outlineConnect=0;portConstraint=eastwest;newEdgeStyle={&quot;edgeStyle&quot;:&quot;elbowEdgeStyle&quot;,&quot;elbow&quot;:&quot;vertical&quot;,&quot;curved&quot;:0,&quot;rounded&quot;:0};" vertex="1" parent="1">
          <mxGeometry x="454" y="980" width="220" height="985" as="geometry" />
        </mxCell>
        <mxCell id="x_W76neEEtvd7lcD01PX-120" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;outlineConnect=0;targetShapes=umlLifeline;portConstraint=eastwest;newEdgeStyle={&quot;edgeStyle&quot;:&quot;elbowEdgeStyle&quot;,&quot;elbow&quot;:&quot;vertical&quot;,&quot;curved&quot;:0,&quot;rounded&quot;:0};" vertex="1" parent="x_W76neEEtvd7lcD01PX-119">
          <mxGeometry x="105" y="104" width="10" height="40" as="geometry" />
        </mxCell>
        <mxCell id="x_W76neEEtvd7lcD01PX-136" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;outlineConnect=0;targetShapes=umlLifeline;portConstraint=eastwest;newEdgeStyle={&quot;edgeStyle&quot;:&quot;elbowEdgeStyle&quot;,&quot;elbow&quot;:&quot;vertical&quot;,&quot;curved&quot;:0,&quot;rounded&quot;:0};" vertex="1" parent="x_W76neEEtvd7lcD01PX-119">
          <mxGeometry x="105" y="359" width="10" height="80" as="geometry" />
        </mxCell>
        <mxCell id="x_W76neEEtvd7lcD01PX-121" value="" style="html=1;verticalAlign=bottom;startArrow=oval;startFill=1;endArrow=block;startSize=8;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;" edge="1" parent="1" source="x_W76neEEtvd7lcD01PX-118" target="x_W76neEEtvd7lcD01PX-120">
          <mxGeometry width="60" relative="1" as="geometry">
            <mxPoint x="384" y="1084" as="sourcePoint" />
            <mxPoint x="444" y="1084" as="targetPoint" />
            <Array as="points">
              <mxPoint x="534" y="1084" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="x_W76neEEtvd7lcD01PX-124" value="&lt;div&gt;1. 通过 CDP_CUSTOMER_SEGMENT_CALCULATION&amp;nbsp;&lt;/div&gt;&lt;div&gt;的Created字段查询当天是否有新的数据&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="x_W76neEEtvd7lcD01PX-121">
          <mxGeometry x="-0.0298" y="-3" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="x_W76neEEtvd7lcD01PX-125" value="&amp;nbsp;返回总数" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;" edge="1" parent="1" source="x_W76neEEtvd7lcD01PX-120" target="x_W76neEEtvd7lcD01PX-118">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="554" y="1124" as="sourcePoint" />
            <mxPoint x="244" y="1164" as="targetPoint" />
            <Array as="points">
              <mxPoint x="514" y="1124" />
              <mxPoint x="444" y="1164" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="x_W76neEEtvd7lcD01PX-128" value="Adobe" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;dropTarget=0;collapsible=0;recursiveResize=0;outlineConnect=0;portConstraint=eastwest;newEdgeStyle={&quot;edgeStyle&quot;:&quot;elbowEdgeStyle&quot;,&quot;elbow&quot;:&quot;vertical&quot;,&quot;curved&quot;:0,&quot;rounded&quot;:0};" vertex="1" parent="1">
          <mxGeometry x="1034" y="980" width="220" height="996" as="geometry" />
        </mxCell>
        <mxCell id="x_W76neEEtvd7lcD01PX-132" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;outlineConnect=0;targetShapes=umlLifeline;portConstraint=eastwest;newEdgeStyle={&quot;edgeStyle&quot;:&quot;elbowEdgeStyle&quot;,&quot;elbow&quot;:&quot;vertical&quot;,&quot;curved&quot;:0,&quot;rounded&quot;:0};" vertex="1" parent="x_W76neEEtvd7lcD01PX-128">
          <mxGeometry x="105" y="484" width="10" height="40" as="geometry" />
        </mxCell>
        <mxCell id="x_W76neEEtvd7lcD01PX-152" value="" style="html=1;verticalAlign=bottom;endArrow=block;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;" edge="1" parent="x_W76neEEtvd7lcD01PX-128" source="x_W76neEEtvd7lcD01PX-118">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="-800" y="274" as="sourcePoint" />
            <mxPoint x="105" y="274" as="targetPoint" />
            <Array as="points">
              <mxPoint x="-230" y="274" />
              <mxPoint x="-240" y="264" />
              <mxPoint x="-310" y="184" />
              <mxPoint x="70" y="154" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="x_W76neEEtvd7lcD01PX-153" value="delete stage&amp;nbsp;by target group id" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="x_W76neEEtvd7lcD01PX-152">
          <mxGeometry x="-0.0209" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="x_W76neEEtvd7lcD01PX-154" value="return" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;" edge="1" parent="x_W76neEEtvd7lcD01PX-128">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="-798" y="314" as="targetPoint" />
            <mxPoint x="105" y="314" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="-300" y="314" />
              <mxPoint x="-40" y="334" />
              <mxPoint x="-230" y="324" />
              <mxPoint x="-270" y="334" />
              <mxPoint x="-320" y="214" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="x_W76neEEtvd7lcD01PX-155" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;outlineConnect=0;targetShapes=umlLifeline;portConstraint=eastwest;newEdgeStyle={&quot;edgeStyle&quot;:&quot;elbowEdgeStyle&quot;,&quot;elbow&quot;:&quot;vertical&quot;,&quot;curved&quot;:0,&quot;rounded&quot;:0};" vertex="1" parent="x_W76neEEtvd7lcD01PX-128">
          <mxGeometry x="105" y="274" width="10" height="40" as="geometry" />
        </mxCell>
        <mxCell id="x_W76neEEtvd7lcD01PX-160" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;outlineConnect=0;targetShapes=umlLifeline;portConstraint=eastwest;newEdgeStyle={&quot;edgeStyle&quot;:&quot;elbowEdgeStyle&quot;,&quot;elbow&quot;:&quot;vertical&quot;,&quot;curved&quot;:0,&quot;rounded&quot;:0};" vertex="1" parent="x_W76neEEtvd7lcD01PX-128">
          <mxGeometry x="105" y="667" width="10" height="34" as="geometry" />
        </mxCell>
        <mxCell id="x_W76neEEtvd7lcD01PX-166" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;outlineConnect=0;targetShapes=umlLifeline;portConstraint=eastwest;newEdgeStyle={&quot;edgeStyle&quot;:&quot;elbowEdgeStyle&quot;,&quot;elbow&quot;:&quot;vertical&quot;,&quot;curved&quot;:0,&quot;rounded&quot;:0};" vertex="1" parent="x_W76neEEtvd7lcD01PX-128">
          <mxGeometry x="105" y="738" width="10" height="35" as="geometry" />
        </mxCell>
        <mxCell id="x_W76neEEtvd7lcD01PX-129" value="mysql.CDP_MBHK_SCHEDULE_JOB" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;dropTarget=0;collapsible=0;recursiveResize=0;outlineConnect=0;portConstraint=eastwest;newEdgeStyle={&quot;edgeStyle&quot;:&quot;elbowEdgeStyle&quot;,&quot;elbow&quot;:&quot;vertical&quot;,&quot;curved&quot;:0,&quot;rounded&quot;:0};" vertex="1" parent="1">
          <mxGeometry x="774" y="980" width="210" height="979" as="geometry" />
        </mxCell>
        <mxCell id="x_W76neEEtvd7lcD01PX-130" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;outlineConnect=0;targetShapes=umlLifeline;portConstraint=eastwest;newEdgeStyle={&quot;edgeStyle&quot;:&quot;elbowEdgeStyle&quot;,&quot;elbow&quot;:&quot;vertical&quot;,&quot;curved&quot;:0,&quot;rounded&quot;:0};" vertex="1" parent="x_W76neEEtvd7lcD01PX-129">
          <mxGeometry x="100" y="203" width="10" height="51" as="geometry" />
        </mxCell>
        <mxCell id="x_W76neEEtvd7lcD01PX-144" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;outlineConnect=0;targetShapes=umlLifeline;portConstraint=eastwest;newEdgeStyle={&quot;edgeStyle&quot;:&quot;elbowEdgeStyle&quot;,&quot;elbow&quot;:&quot;vertical&quot;,&quot;curved&quot;:0,&quot;rounded&quot;:0};" vertex="1" parent="x_W76neEEtvd7lcD01PX-129">
          <mxGeometry x="100" y="554" width="10" height="40" as="geometry" />
        </mxCell>
        <mxCell id="x_W76neEEtvd7lcD01PX-172" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;outlineConnect=0;targetShapes=umlLifeline;portConstraint=eastwest;newEdgeStyle={&quot;edgeStyle&quot;:&quot;elbowEdgeStyle&quot;,&quot;elbow&quot;:&quot;vertical&quot;,&quot;curved&quot;:0,&quot;rounded&quot;:0};" vertex="1" parent="x_W76neEEtvd7lcD01PX-129">
          <mxGeometry x="100" y="831" width="10" height="51" as="geometry" />
        </mxCell>
        <mxCell id="x_W76neEEtvd7lcD01PX-173" value="修改CDP_SEGMENT_DELIVERY_LOG表同步状态为完成" style="html=1;verticalAlign=bottom;startArrow=oval;startFill=1;endArrow=block;startSize=8;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;" edge="1" parent="x_W76neEEtvd7lcD01PX-129" target="x_W76neEEtvd7lcD01PX-172">
          <mxGeometry width="60" relative="1" as="geometry">
            <mxPoint x="-538" y="832" as="sourcePoint" />
            <mxPoint x="-350" y="852" as="targetPoint" />
            <Array as="points">
              <mxPoint x="-380" y="832" />
              <mxPoint x="-160" y="802" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="x_W76neEEtvd7lcD01PX-174" value="return" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;" edge="1" parent="x_W76neEEtvd7lcD01PX-129" source="x_W76neEEtvd7lcD01PX-172">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="-100" y="862" as="sourcePoint" />
            <mxPoint x="-538" y="882" as="targetPoint" />
            <Array as="points">
              <mxPoint x="-150" y="882" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="x_W76neEEtvd7lcD01PX-131" value="2. 将同步的日志信息出入到CDP_SEGMENT_DELIVERY_LOG表" style="html=1;verticalAlign=bottom;startArrow=oval;startFill=1;endArrow=block;startSize=8;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;" edge="1" parent="1" target="x_W76neEEtvd7lcD01PX-130">
          <mxGeometry width="60" relative="1" as="geometry">
            <mxPoint x="236" y="1184" as="sourcePoint" />
            <mxPoint x="424" y="1204" as="targetPoint" />
            <Array as="points">
              <mxPoint x="394" y="1184" />
              <mxPoint x="614" y="1154" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="x_W76neEEtvd7lcD01PX-135" value="return" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;" edge="1" parent="1" source="x_W76neEEtvd7lcD01PX-130">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="674" y="1214" as="sourcePoint" />
            <mxPoint x="236" y="1234" as="targetPoint" />
            <Array as="points">
              <mxPoint x="624" y="1234" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="x_W76neEEtvd7lcD01PX-133" value="" style="html=1;verticalAlign=bottom;endArrow=block;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;" edge="1" target="x_W76neEEtvd7lcD01PX-132" parent="1" source="x_W76neEEtvd7lcD01PX-118">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="234" y="1464" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="804" y="1464" />
              <mxPoint x="794" y="1454" />
              <mxPoint x="724" y="1374" />
              <mxPoint x="1104" y="1344" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="x_W76neEEtvd7lcD01PX-139" value="分页查询的数据同步到stage表" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="x_W76neEEtvd7lcD01PX-133">
          <mxGeometry x="-0.0209" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="x_W76neEEtvd7lcD01PX-134" value="return" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;" edge="1" source="x_W76neEEtvd7lcD01PX-132" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="236" y="1504" as="targetPoint" />
            <Array as="points">
              <mxPoint x="734" y="1504" />
              <mxPoint x="994" y="1524" />
              <mxPoint x="804" y="1514" />
              <mxPoint x="764" y="1524" />
              <mxPoint x="714" y="1404" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="x_W76neEEtvd7lcD01PX-137" value="分页查询CDP_CUSTOMER_SEGMENT_CALCULATION" style="html=1;verticalAlign=bottom;endArrow=block;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;" edge="1" target="x_W76neEEtvd7lcD01PX-136" parent="1">
          <mxGeometry x="0.0031" relative="1" as="geometry">
            <mxPoint x="236" y="1344" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="434" y="1344" />
            </Array>
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="x_W76neEEtvd7lcD01PX-138" value="分页查询的数据" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;" edge="1" source="x_W76neEEtvd7lcD01PX-136" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="236" y="1414" as="targetPoint" />
            <Array as="points">
              <mxPoint x="384" y="1414" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="x_W76neEEtvd7lcD01PX-145" value="同步上次插入的offset" style="html=1;verticalAlign=bottom;endArrow=block;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;" edge="1" target="x_W76neEEtvd7lcD01PX-144" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="236" y="1534" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="804" y="1534" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="x_W76neEEtvd7lcD01PX-146" value="return" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;" edge="1" source="x_W76neEEtvd7lcD01PX-144" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="234" y="1574" as="targetPoint" />
            <Array as="points">
              <mxPoint x="794" y="1574" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="x_W76neEEtvd7lcD01PX-151" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;outlineConnect=0;targetShapes=umlLifeline;portConstraint=eastwest;newEdgeStyle={&quot;edgeStyle&quot;:&quot;elbowEdgeStyle&quot;,&quot;elbow&quot;:&quot;vertical&quot;,&quot;curved&quot;:0,&quot;rounded&quot;:0};" vertex="1" parent="1">
          <mxGeometry x="1139" y="1464" width="10" height="40" as="geometry" />
        </mxCell>
        <mxCell id="x_W76neEEtvd7lcD01PX-161" value="delete target by target group id" style="html=1;verticalAlign=bottom;endArrow=block;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;" edge="1" target="x_W76neEEtvd7lcD01PX-160" parent="1" source="x_W76neEEtvd7lcD01PX-118">
          <mxGeometry x="0.0011" relative="1" as="geometry">
            <mxPoint x="1069" y="1647" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="489" y="1649" />
            </Array>
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="x_W76neEEtvd7lcD01PX-169" value="insert into&amp;nbsp; target&amp;nbsp; &amp;nbsp;&lt;br style=&quot;border-color: var(--border-color); text-align: left;&quot;&gt;&lt;span style=&quot;text-align: left;&quot;&gt;select * from stage where targetGroupId&lt;/span&gt;" style="html=1;verticalAlign=bottom;startArrow=oval;startFill=1;endArrow=block;startSize=8;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;" edge="1" parent="1" source="x_W76neEEtvd7lcD01PX-118" target="x_W76neEEtvd7lcD01PX-166">
          <mxGeometry width="60" relative="1" as="geometry">
            <mxPoint x="241" y="1749" as="sourcePoint" />
            <mxPoint x="322" y="1708" as="targetPoint" />
            <Array as="points">
              <mxPoint x="976" y="1721" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="x_W76neEEtvd7lcD01PX-171" value="tx" style="shape=umlFrame;whiteSpace=wrap;html=1;pointerEvents=0;" vertex="1" parent="1">
          <mxGeometry x="153" y="1620" width="1085" height="148" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
